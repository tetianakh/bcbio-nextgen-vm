- name: Clone bcbio source code from a dev fork
  sudo: false
  hosts: frontend*
  vars:
    src_dir: "~{{ansible_user_id}}/src/bcbio-nextgen"
    bcbio_repo: "https://github.com/tetianakh/bcbio-nextgen.git"
    bcbio_vm_repo: "https://github.com/tetianakh/bcbio-nextgen-vm.git"
  tasks:

    - name: Clone bcbio code from S3 fork
      git:
        repo:  "{{ bcbio_repo }}"
        dest: "{{ src_dir }}"
        version: master feature/work_dir_on_S3
        clone: yes

    - name: Clone bcbio-vm code from S3 fork
      git:
        repo:  "{{ bcbio_vm_repo }}"
        dest: "{{ src_dir }}"
        version: fix/adjust_aws_setup_for_s3 
        clone: yes
